<!DOCTYPE html>
<html lang="en">

<head>
  <title>Checkbox.Test</title>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="../common/style/yuko-reset.css">
  <link rel="stylesheet" href="../common/style/yuko.css">
  <link rel="stylesheet" href="../common/style/material-icons.css">
  <link rel="stylesheet" href="../common/style/yuko.component.css">
  <style>
.yuko-checkbox { position: relative; z-index: 1; vertical-align: middle; display: inline-block; box-sizing: border-box; width: 24px; height: 24px; margin: 0; padding: 0; -webkit-tap-highlight-color: transparent; -webkit-tap-highlight-color: rgba(255, 255, 255, 0); }
.yuko-checkbox.is-checked .yuko-checkbox_box-outline { border-width: 2px; border-style: solid; border-color: rgb(63, 81, 181); border-image: initial; }kbox_box-outline { border-width: 2px; border-style: solid; border-color: rgb(63, 81, 181); border-image: initial; }
.yuko-checkbox_box-outline { position: absolute; top: 3px; left: 0px; display: inline-block; box-sizing: border-box; width: 16px; height: 16px; cursor: pointer; z-index: 2; margin: 0px; overflow: hidden; border-width: 2px; border-style: solid; border-color: rgba(0, 0, 0, 0.54); border-image: initial; border-radius: 2px; }
.yuko-checkbox.is-checked .yuko-checkbox_tick-outline { background: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjxzdmcKICAgeG1sbnM6ZGM9Imh0dHA6Ly9wdXJsLm9yZy9kYy9lbGVtZW50cy8xLjEvIgogICB4bWxuczpjYz0iaHR0cDovL2NyZWF0aXZlY29tbW9ucy5vcmcvbnMjIgogICB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiCiAgIHhtbG5zOnN2Zz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIKICAgdmVyc2lvbj0iMS4xIgogICB2aWV3Qm94PSIwIDAgMSAxIgogICBwcmVzZXJ2ZUFzcGVjdFJhdGlvPSJ4TWluWU1pbiBtZWV0Ij4KICA8cGF0aAogICAgIGQ9Ik0gMC4wNDAzODA1OSwwLjYyNjc3NjcgMC4xNDY0NDY2MSwwLjUyMDcxMDY4IDAuNDI5Mjg5MzIsMC44MDM1NTMzOSAwLjMyMzIyMzMsMC45MDk2MTk0MSB6IE0gMC4yMTcxNTcyOSwwLjgwMzU1MzM5IDAuODUzNTUzMzksMC4xNjcxNTcyOSAwLjk1OTYxOTQxLDAuMjczMjIzMyAwLjMyMzIyMzMsMC45MDk2MTk0MSB6IgogICAgIGlkPSJyZWN0Mzc4MCIKICAgICBzdHlsZT0iZmlsbDojZmZmZmZmO2ZpbGwtb3BhY2l0eToxO3N0cm9rZTpub25lIiAvPgo8L3N2Zz4K) rgb(63, 81, 181); }
.yuko-checkbox_tick-outline { position: absolute; top: 0px; left: 0px; height: 100%; width: 100%; mask: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjxzdmcKICAgeG1sbnM6ZGM9Imh0dHA6Ly9wdXJsLm9yZy9kYy9lbGVtZW50cy8xLjEvIgogICB4bWxuczpjYz0iaHR0cDovL2NyZWF0aXZlY29tbW9ucy5vcmcvbnMjIgogICB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiCiAgIHhtbG5zOnN2Zz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIKICAgdmVyc2lvbj0iMS4xIgogICB2aWV3Qm94PSIwIDAgMSAxIgogICBwcmVzZXJ2ZUFzcGVjdFJhdGlvPSJ4TWluWU1pbiBtZWV0Ij4KICA8ZGVmcz4KICAgIDxjbGlwUGF0aCBpZD0iY2xpcCI+CiAgICAgIDxwYXRoCiAgICAgICAgIGQ9Ik0gMCwwIDAsMSAxLDEgMSwwIDAsMCB6IE0gMC44NTM0Mzc1LDAuMTY3MTg3NSAwLjk1OTY4NzUsMC4yNzMxMjUgMC40MjkzNzUsMC44MDM0Mzc1IDAuMzIzMTI1LDAuOTA5Njg3NSAwLjIxNzE4NzUsMC44MDM0Mzc1IDAuMDQwMzEyNSwwLjYyNjg3NSAwLjE0NjU2MjUsMC41MjA2MjUgMC4zMjMxMjUsMC42OTc1IDAuODUzNDM3NSwwLjE2NzE4NzUgeiIKICAgICAgICAgc3R5bGU9ImZpbGw6I2ZmZmZmZjtmaWxsLW9wYWNpdHk6MTtzdHJva2U6bm9uZSIgLz4KICAgIDwvY2xpcFBhdGg+CiAgICA8bWFzayBpZD0ibWFzayIgbWFza1VuaXRzPSJvYmplY3RCb3VuZGluZ0JveCIgbWFza0NvbnRlbnRVbml0cz0ib2JqZWN0Qm91bmRpbmdCb3giPgogICAgICA8cGF0aAogICAgICAgICBkPSJNIDAsMCAwLDEgMSwxIDEsMCAwLDAgeiBNIDAuODUzNDM3NSwwLjE2NzE4NzUgMC45NTk2ODc1LDAuMjczMTI1IDAuNDI5Mzc1LDAuODAzNDM3NSAwLjMyMzEyNSwwLjkwOTY4NzUgMC4yMTcxODc1LDAuODAzNDM3NSAwLjA0MDMxMjUsMC42MjY4NzUgMC4xNDY1NjI1LDAuNTIwNjI1IDAuMzIzMTI1LDAuNjk3NSAwLjg1MzQzNzUsMC4xNjcxODc1IHoiCiAgICAgICAgIHN0eWxlPSJmaWxsOiNmZmZmZmY7ZmlsbC1vcGFjaXR5OjE7c3Ryb2tlOm5vbmUiIC8+CiAgICA8L21hc2s+CiAgPC9kZWZzPgogIDxyZWN0CiAgICAgd2lkdGg9IjEiCiAgICAgaGVpZ2h0PSIxIgogICAgIHg9IjAiCiAgICAgeT0iMCIKICAgICBjbGlwLXBhdGg9InVybCgjY2xpcCkiCiAgICAgc3R5bGU9ImZpbGw6IzAwMDAwMDtmaWxsLW9wYWNpdHk6MTtzdHJva2U6bm9uZSIgLz4KPC9zdmc+Cg==); transition-duration: 0.28s; transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1); transition-property: background; -webkit-mask: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjxzdmcKICAgeG1sbnM6ZGM9Imh0dHA6Ly9wdXJsLm9yZy9kYy9lbGVtZW50cy8xLjEvIgogICB4bWxuczpjYz0iaHR0cDovL2NyZWF0aXZlY29tbW9ucy5vcmcvbnMjIgogICB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiCiAgIHhtbG5zOnN2Zz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIKICAgdmVyc2lvbj0iMS4xIgogICB2aWV3Qm94PSIwIDAgMSAxIgogICBwcmVzZXJ2ZUFzcGVjdFJhdGlvPSJ4TWluWU1pbiBtZWV0Ij4KICA8ZGVmcz4KICAgIDxjbGlwUGF0aCBpZD0iY2xpcCI+CiAgICAgIDxwYXRoCiAgICAgICAgIGQ9Ik0gMCwwIDAsMSAxLDEgMSwwIDAsMCB6IE0gMC44NTM0Mzc1LDAuMTY3MTg3NSAwLjk1OTY4NzUsMC4yNzMxMjUgMC40MjkzNzUsMC44MDM0Mzc1IDAuMzIzMTI1LDAuOTA5Njg3NSAwLjIxNzE4NzUsMC44MDM0Mzc1IDAuMDQwMzEyNSwwLjYyNjg3NSAwLjE0NjU2MjUsMC41MjA2MjUgMC4zMjMxMjUsMC42OTc1IDAuODUzNDM3NSwwLjE2NzE4NzUgeiIKICAgICAgICAgc3R5bGU9ImZpbGw6I2ZmZmZmZjtmaWxsLW9wYWNpdHk6MTtzdHJva2U6bm9uZSIgLz4KICAgIDwvY2xpcFBhdGg+CiAgICA8bWFzayBpZD0ibWFzayIgbWFza1VuaXRzPSJvYmplY3RCb3VuZGluZ0JveCIgbWFza0NvbnRlbnRVbml0cz0ib2JqZWN0Qm91bmRpbmdCb3giPgogICAgICA8cGF0aAogICAgICAgICBkPSJNIDAsMCAwLDEgMSwxIDEsMCAwLDAgeiBNIDAuODUzNDM3NSwwLjE2NzE4NzUgMC45NTk2ODc1LDAuMjczMTI1IDAuNDI5Mzc1LDAuODAzNDM3NSAwLjMyMzEyNSwwLjkwOTY4NzUgMC4yMTcxODc1LDAuODAzNDM3NSAwLjA0MDMxMjUsMC42MjY4NzUgMC4xNDY1NjI1LDAuNTIwNjI1IDAuMzIzMTI1LDAuNjk3NSAwLjg1MzQzNzUsMC4xNjcxODc1IHoiCiAgICAgICAgIHN0eWxlPSJmaWxsOiNmZmZmZmY7ZmlsbC1vcGFjaXR5OjE7c3Ryb2tlOm5vbmUiIC8+CiAgICA8L21hc2s+CiAgPC9kZWZzPgogIDxyZWN0CiAgICAgd2lkdGg9IjEiCiAgICAgaGVpZ2h0PSIxIgogICAgIHg9IjAiCiAgICAgeT0iMCIKICAgICBjbGlwLXBhdGg9InVybCgjY2xpcCkiCiAgICAgc3R5bGU9ImZpbGw6IzAwMDAwMDtmaWxsLW9wYWNpdHk6MTtzdHJva2U6bm9uZSIgLz4KPC9zdmc+Cg==); background: 0px 0px; }
.yuko-checkbox_ripple { position: absolute; z-index: 2; top: -6px; left: -10px; box-sizing: border-box; width: 36px; height: 36px; cursor: pointer; -webkit-mask-image: -webkit-radial-gradient(center, circle cover, rgb(255, 255, 255), rgb(0, 0, 0)); border-radius: 50%; overflow: hidden; }
.yuko-checkbox_ripple .yuko-ripple { background: rgb(63, 81, 181); }
.yuko-ripple.is-animating { transition: transform 0.3s cubic-bezier(0, 0, 0.2, 1), width 0.3s cubic-bezier(0, 0, 0.2, 1), height 0.3s cubic-bezier(0, 0, 0.2, 1), opacity 0.6s cubic-bezier(0, 0, 0.2, 1), -webkit-transform 0.3s cubic-bezier(0, 0, 0.2, 1); }
.yuko-ripple.is-animating.is-visible { opacity: .3; }
.yuko-ripple { position: absolute; left: 0px; top: 0px; opacity: 0; pointer-events: none; border-radius: 50%; overflow: hidden; width: 104px; height: 104px; transform: translate(-50%, -50%) translate(18px, 18px); }
.yuko-radio .yuko-radio_button,
.yuko-checkbox .yuko-checkbox_input { position: absolute; width: 0; height: 0; margin: 0; padding: 0; opacity: 0; -ms-appearance: none; -moz-appearance: none; -webkit-appearance: none; appearance: none; border: none; }
  </style>
</head>

<body>
    <div class="yuko-select_container">
      <span class="yuko-checkbox yuko-checkbox-all">
        <input type="checkbox" class="yuko-checkbox_input" name="cb">
        <span class="yuko-checkbox_box-outline">
          <span class="yuko-checkbox_tick-outline"></span>
        </span>
      </span>
    </div>

    <div class="yuko-select_container">
      <span class="yuko-checkbox">
        <input type="checkbox" class="yuko-checkbox_input" name="cb">
        <span class="yuko-checkbox_box-outline">
          <span class="yuko-checkbox_tick-outline"></span>
        </span>
        <span class="yuko-checkbox_ripple yuko-js-ripple-effect yuko-ripple--center">
          <span class="yuko-ripple is-animating"></span>
        </span>
      </span>
    </div>
    
    <div class="yuko-select_container">
      <span class="yuko-checkbox">
        <input type="checkbox" class="yuko-checkbox_input" name="cb">
        <span class="yuko-checkbox_box-outline">
          <span class="yuko-checkbox_tick-outline"></span>
        </span>
      </span>
    </div>
    
  <script src="../common/script/Yuko.js"></script>
  <script>

    function isMobile() {
      if ((navigator.userAgent.match(/(iPhone|iPod|Android|ios|SymbianOS)/i))) {
        return true;
      }
      return false;
    }

    var fingerdown, fingermove, fingerup;
    if(isMobile()) {
      fingerdown = 'touchstart';
      fingermove = 'touchmove';
      fingerup = 'touchend';
    }else{
      fingerdown = 'mousedown';
      fingermove = 'mousemove';
      fingerup = 'mouseup';
    }
    // Checkbox
    var checkboxs = document.querySelectorAll('.yuko-checkbox'),
        isCancel;

    Yuko.utility.addEvent(document.body, fingerdown, function (evt) {
        var _target = event.target;
        if (_target.className.indexOf('yuko-checkbox') >= 0) {
          // _this: yuko-checkbox
          var _this, _last, _input;
          if (_target.classList.contains('yuko-checkbox_ripple')) {
            // There is a ripple container
            _this = _target.parentElement;
            _last = _this.lastElementChild;
            // Set ripple container visible
            var _rc = _last.firstElementChild;
            if (!_rc.classList.contains('is-visible')) {
              _rc.classList.add('is-visible');
            }
          } else if (_target.className.indexOf('yuko-checkbox_tick-outline') >= 0) {
            // There is not a ripple container
            _this = _target.parentElement.parentElement;
          } else {
            // yuko-checkbox itself
            _this = _target;
          }
          _last = _this.lastElementChild;
          _input = _this.firstElementChild;

          // If is a check-all checkbox
          if(_this.classList.contains('yuko-checkbox-all')) {
            var checkall = _this.firstElementChild; // Check all input
            // If is a check-all checkbox
            for (var cbi = 0; cbi < checkboxs.length; cbi++) {
              var cb = checkboxs[cbi],
                cbInput = cb.firstElementChild;
              if(cbInput.name == _input.name && cb != _this) {
                // Same-named input
                if(!checkall.hasAttribute('checked')) {
                  cb.classList.add('is-checked');
                  cbInput.setAttribute('check','');
                } else {
                  cb.classList.remove('is-checked');
                  cbInput.removeAttribute('check');
                }
              }
            }
          }

          // Set checked
          if (!_this.classList.contains('is-checked')) {
            _this.classList.add('is-checked');
            _input.setAttribute('checked', '');
            isCancel = false;
          } else {
            isCancel = true;
          }

        }
      });

    Yuko.utility.addEvent(document.body, fingerup, function (evt) {
      var _target = event.target;
      if(_target.className.indexOf('yuko-checkbox') >= 0) {
        var _this, _last, _input;
          if (_target.classList.contains('yuko-checkbox_ripple')) {
            // Set ripple container visible
            _this = _target.parentElement;
            _last = _this.lastElementChild;
            var _rc = _last.firstElementChild;
            if(_rc.classList.contains('is-visible')) {
              _rc.classList.remove('is-visible');
            }
          } else if (_target.classList.contains('yuko-checkbox_tick-outline')) {
            // There is not a ripple container
            _this = _target.parentElement.parentElement;
          } else {
            // yuko-checkbox itself
            _this = _target;
          }
          _last = _this.lastElementChild;
          _input = _this.firstElementChild;
          if(isCancel){
            _this.classList.remove('is-checked');
            if(_input.type == 'checkbox') {
              _input.removeAttribute('checked');
            }
          }
      }
    });

  </script>
</body>

</html>