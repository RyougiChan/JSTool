<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Navigation Drawer</title>
    <style>
        html,
        body {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
        }

        #main-container {
            width: 100%;
            height: 100%;
            position: relative;
        }

        #nav-drawer {
            width: 200px;
            height: 100%;
            position: absolute;
            left: -190px;
        }
        #nav-list {
            background: lightblue;
            width: 190px;
            height: 100%;
        }
        #nav-white {
            float: right;
            background: none;
            width: 10px;
            height: 100%;
        }
    </style>
</head>

<body>
    <div id="main-container">
        <div id="nav-drawer">
            <div id="nav-white"></div>
            <div id="nav-list"></div>
        </div>
    </div>
    <script>
        var yuko = {
      // "value": "ox" : start touch point x,"oy" : start touch point y,"ofx" : offset touch point x,"ofy" : offset touch point y,"ex" : end touch point x,"ey" : end touch point y, "dtx" : temp touch distance x, "dty" : temp touch distance x, "dx" : total touch distance x, "dy" : total touch distance y
      "value": { "ox": 0, "oy": 0, "ofx": 0, "ofy": 0, "ex": 0, "ey": 0, "dtx": 0, "dty": 0, "dx": 0, "dy": 0, "el": 0 },
      "slide": (dom) => {
        var drawer = dom;
        var drawerX = drawer.offsetLeft;
        var drawerY = drawer.offsetTop;
        var drawerW = drawer.offsetWidth;
        var relative_distance = 0;
        var touchStartListener;
        var touchMoveListener;
        var touchEndListener;
        document.body.addEventListener("touchstart", (event) => {
          if (event.changedTouches[0].pageX > 0 && event.changedTouches[0].pageX < 10) {
            touchStartListener = (event) => {
              yuko.value.ox = event.changedTouches[0].pageX;
              yuko.value.oy = event.changedTouches[0].pageY;
              relative_distance = yuko.value.ox - drawerX;
            }
            touchMoveListener = (event) => {
              yuko.log(event, yuko.value);
              yuko.value.dtx = yuko.value.ofx - yuko.value.ox;
              yuko.value.dty = yuko.value.ofy - yuko.value.oy;
              if (yuko.value.dtx < drawerW && drawer.offsetLeft >= 0) {
                if (yuko.value.el >= drawerW / 2) {
                  if (yuko.value.dtx < 0)
                    changeLeft(drawer, drawerW + yuko.value.dtx);
                  else undefined;
                }
                else changeLeft(drawer, drawerX + yuko.value.dtx);
              }
            }
            touchEndListener = (event) => {
              yuko.value.ex = event.changedTouches[0].pageX;
              yuko.value.ey = event.changedTouches[0].pageY;
              yuko.value.dx = yuko.value.ex - yuko.value.ox;
              yuko.value.dy = yuko.value.ey - yuko.value.oy;
              yuko.value.dx < drawerW / 2 ? drawer.offsetLeft < drawerW / 2 ? yuko.timer(drawer, drawer.offsetLeft, 0, 100) : yuko.timer(drawer, drawer.offsetLeft, drawerW, 300) : yuko.timer(drawer, drawer.offsetLeft, drawerW, 300);
              yuko.value.el = drawer.offsetLeft;
            }
            document.body.addEventListener("touchstart", touchStartListener);
            document.body.addEventListener("touchmove", touchMoveListener);
            document.body.addEventListener("touchend", touchEndListener);
          }
        });
        // if (drawer.offsetLeft == 0) {
        //   document.body.removeEventListener("touchstart",touchStartListener);
        //   document.body.removeEventListener("touchmove",touchMoveListener);
        //   document.body.removeEventListener("touchend",touchEndListener);
        // }
        var changeLeft = (dom, x) => {
          dom.style.left = x + "px";
        }
      },
      "log": (event, obj) => {
        obj.ofx = event.changedTouches[0].pageX;
        obj.ofy = event.changedTouches[0].pageY;
      },
      "timer": (dom, start, stop, duration) => {
        var distance = start - stop;
        var intID = setInterval(
          () => {
            if (start == stop) {
              clearInterval(intID);
              return;
            }
            if (start > stop) {
              start--;
              dom.style.left = start + "px";
            } else {
              start++;
              dom.style.left = start + "px";
            }
          }
          , duration / distance
        );

      }
    }
    yuko.slide(document.getElementById("nav-drawer"));
    </script>
</body>

</html>